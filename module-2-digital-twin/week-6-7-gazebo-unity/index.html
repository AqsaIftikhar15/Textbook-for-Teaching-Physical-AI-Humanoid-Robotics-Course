<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-module-2-digital-twin/week-6-7-gazebo-unity" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Robot Simulation with Gazebo and Unity | Physical AI &amp; Humanoid Robotics Book</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aqsaiftikhar15.github.io/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://aqsaiftikhar15.github.io/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://aqsaiftikhar15.github.io/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-2-digital-twin/week-6-7-gazebo-unity/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Robot Simulation with Gazebo and Unity | Physical AI &amp; Humanoid Robotics Book"><meta data-rh="true" name="description" content="Physics simulation and environment building"><meta data-rh="true" property="og:description" content="Physics simulation and environment building"><link data-rh="true" rel="icon" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://aqsaiftikhar15.github.io/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-2-digital-twin/week-6-7-gazebo-unity/"><link data-rh="true" rel="alternate" href="https://aqsaiftikhar15.github.io/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-2-digital-twin/week-6-7-gazebo-unity/" hreflang="en"><link data-rh="true" rel="alternate" href="https://aqsaiftikhar15.github.io/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-2-digital-twin/week-6-7-gazebo-unity/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Robot Simulation with Gazebo and Unity","item":"https://aqsaiftikhar15.github.io/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-2-digital-twin/week-6-7-gazebo-unity"}]}</script><link rel="stylesheet" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/assets/css/styles.3d857ee1.css">
<script src="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/assets/js/runtime~main.e7f37915.js" defer="defer"></script>
<script src="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/assets/js/main.6c46bae1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/"><div class="navbar__logo"><img src="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/img/logo.svg" alt="Robotics Book Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/img/logo.svg" alt="Robotics Book Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Physical AI &amp; Humanoid Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/">Modules</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://aqsaiftikhar15.github.io/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/"><span title="Introduction" class="categoryLinkLabel_W154">Introduction</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-1-ros2/week-1-2-intro-physical-ai/"><span title="Module 1: The Robotic Nervous System (ROS 2)" class="categoryLinkLabel_W154">Module 1: The Robotic Nervous System (ROS 2)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-2-digital-twin/week-6-7-gazebo-unity/"><span title="Module 2: The Digital Twin (Gazebo &amp; Unity)" class="categoryLinkLabel_W154">Module 2: The Digital Twin (Gazebo &amp; Unity)</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-2-digital-twin/week-6-7-gazebo-unity/"><span title="Robot Simulation with Gazebo and Unity" class="linkLabel_WmDU">Robot Simulation with Gazebo and Unity</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-2-digital-twin/simulation-concepts/"><span title="Simulation Concepts" class="linkLabel_WmDU">Simulation Concepts</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-3-ai-brain/week-8-10-isaac-platform/"><span title="Module 3: The AI-Robot Brain (NVIDIA Isaac)" class="categoryLinkLabel_W154">Module 3: The AI-Robot Brain (NVIDIA Isaac)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-4-vla/week-13-vla-concepts/"><span title="Module 4: Vision-Language-Action (VLA)" class="categoryLinkLabel_W154">Module 4: Vision-Language-Action (VLA)</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Module 2: The Digital Twin (Gazebo &amp; Unity)</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Robot Simulation with Gazebo and Unity</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Week 6: Gazebo Simulation Concepts</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" translate="no">​</a></h2>
<p>Gazebo serves as a critical simulation environment for developing and testing humanoid robots in a safe, controlled, and cost-effective manner. This week explores the fundamental concepts of physics simulation, environment modeling, and sensor simulation that enable effective robot development before real-world deployment. Gazebo&#x27;s realistic physics engine and comprehensive sensor models make it an invaluable tool for Sim2Real transfer, where skills learned in simulation can be applied to real robots.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="physics-simulation-fundamentals">Physics Simulation Fundamentals<a href="#physics-simulation-fundamentals" class="hash-link" aria-label="Direct link to Physics Simulation Fundamentals" title="Direct link to Physics Simulation Fundamentals" translate="no">​</a></h2>
<p>Gazebo&#x27;s physics engine forms the foundation for realistic robot simulation, modeling the complex interactions between robots, objects, and environments that occur in the physical world.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="physics-engine-architecture">Physics Engine Architecture<a href="#physics-engine-architecture" class="hash-link" aria-label="Direct link to Physics Engine Architecture" title="Direct link to Physics Engine Architecture" translate="no">​</a></h3>
<p>Gazebo supports multiple physics engines, with each offering different trade-offs between accuracy and performance:</p>
<ul>
<li class=""><strong>ODE (Open Dynamics Engine)</strong>: Fast, stable for most robotics applications</li>
<li class=""><strong>Bullet</strong>: More accurate collision detection and response</li>
<li class=""><strong>DART</strong>: Advanced kinematic and dynamic modeling capabilities</li>
<li class=""><strong>Simbody</strong>: High-fidelity multibody dynamics</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: Physics Simulation Core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class PhysicsEngine:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self, engine_type=&#x27;ode&#x27;):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.engine = self.initialize_engine(engine_type)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.world = World()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.contact_manager = ContactManager()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.integrator = Integrator(method=&#x27;runge_kutta&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def simulate_step(self, dt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update collision detection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        collisions = self.contact_manager.detect_collisions(self.world)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Apply contact forces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for collision in collisions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            force = self.compute_contact_force(collision)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            collision.body1.apply_force(force)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            collision.body2.apply_force(-force)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update body states (position, velocity, acceleration)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for body in self.world.bodies:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Apply gravity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            body.apply_force(body.mass * self.gravity)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Apply user-defined forces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for force in body.external_forces:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                body.apply_force(force)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Integrate equations of motion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            body.integrate(self.integrator, dt)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update world state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.world.update(dt)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def compute_contact_force(self, collision):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Compute normal and friction forces based on collision properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        penetration_depth = collision.penetration_depth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        normal = collision.normal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        relative_velocity = collision.body1.velocity - collision.body2.velocity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Normal force (repulsive)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        normal_force_magnitude = self.springs_constant * penetration_depth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        normal_force = normal * normal_force_magnitude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Friction force (opposes relative motion)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tangent_velocity = relative_velocity - (relative_velocity.dot(normal)) * normal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        friction_force = -tangent_velocity.normalize() * min(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.friction_coefficient * normal_force_magnitude,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            tangent_velocity.length()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return normal_force + friction_force</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="gravity-and-environmental-forces">Gravity and Environmental Forces<a href="#gravity-and-environmental-forces" class="hash-link" aria-label="Direct link to Gravity and Environmental Forces" title="Direct link to Gravity and Environmental Forces" translate="no">​</a></h3>
<p>Realistic simulation of environmental forces is crucial for humanoid robot development:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: Environmental Force Simulation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class EnvironmentalForces:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.gravity = Vector3(0, 0, -9.81)  # Earth&#x27;s gravity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.wind = Vector3(0, 0, 0)  # Default no wind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.magnetic_field = Vector3(0.25, 0, 0.45)  # Approximate magnetic field</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def apply_gravity(self, body):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Apply gravitational force to each body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gravity_force = body.mass * self.gravity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        body.apply_force(gravity_force, body.center_of_mass)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def apply_wind_force(self, body, wind_speed, drag_coefficient):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Compute wind resistance based on body&#x27;s relative velocity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        relative_velocity = body.velocity - self.wind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wind_force_magnitude = 0.5 * self.air_density * drag_coefficient * body.frontal_area * (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            relative_velocity.length() ** 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wind_force = -relative_velocity.normalize() * wind_force_magnitude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        body.apply_force(wind_force, body.center_of_mass)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def simulate_atmospheric_effects(self, altitude):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Adjust air density based on altitude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.air_density = self.sea_level_density * math.exp(-altitude / 8500)  # Scale height approximation</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="collision-detection-and-response">Collision Detection and Response<a href="#collision-detection-and-response" class="hash-link" aria-label="Direct link to Collision Detection and Response" title="Direct link to Collision Detection and Response" translate="no">​</a></h3>
<p>Accurate collision detection and response are essential for realistic humanoid robot simulation:</p>
<ul>
<li class=""><strong>Broad Phase</strong>: Fast culling of non-colliding pairs using bounding volumes</li>
<li class=""><strong>Narrow Phase</strong>: Precise collision detection between potentially colliding objects</li>
<li class=""><strong>Contact Resolution</strong>: Computing appropriate forces to prevent penetration</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: Collision Detection System</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class CollisionDetector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.broad_phase = BoundingVolumeHierarchy()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.narrow_phase = GJKAlgorithm()  # Gilbert-Johnson-Keerthi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.contact_resolver = SequentialImpulses()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def detect_collisions(self, bodies):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Broad phase: identify potential collisions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        potential_pairs = self.broad_phase.find_collisions(bodies)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        actual_collisions = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for body1, body2 in potential_pairs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Narrow phase: precise collision detection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            collision_info = self.narrow_phase.check_collision(body1, body2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if collision_info.collides:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Compute contact points and normals</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                contact_points = self.compute_contact_points(collision_info)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                for point in contact_points:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    collision = Collision(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        body1=body1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        body2=body2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        contact_point=point.position,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        normal=point.normal,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        penetration_depth=point.penetration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    actual_collisions.append(collision)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return actual_collisions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def compute_contact_points(self, collision_info):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Compute multiple contact points for stable contact</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        contact_points = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for i in range(collision_info.num_contact_points):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            point = ContactPoint()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            point.position = collision_info.contact_positions[i]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            point.normal = collision_info.contact_normals[i]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            point.penetration = collision_info.penetrations[i]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            contact_points.append(point)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return contact_points</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="environment-building-and-world-modeling">Environment Building and World Modeling<a href="#environment-building-and-world-modeling" class="hash-link" aria-label="Direct link to Environment Building and World Modeling" title="Direct link to Environment Building and World Modeling" translate="no">​</a></h2>
<p>Creating realistic simulation environments is crucial for effective humanoid robot training and testing. The environment must accurately represent the physical space where the robot will operate.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="world-description-format-sdf">World Description Format (SDF)<a href="#world-description-format-sdf" class="hash-link" aria-label="Direct link to World Description Format (SDF)" title="Direct link to World Description Format (SDF)" translate="no">​</a></h3>
<p>SDF (Simulation Description Format) provides a standardized way to describe simulation environments:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- example_world.sdf --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">sdf</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">version</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1.7</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">world</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">humanoid_world</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Physics engine configuration --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">physics</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ode</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">max_step_size</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.001</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">max_step_size</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">real_time_factor</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">real_time_factor</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">gravity</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0 0 -9.8</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">gravity</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">physics</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Ground plane --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">model</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ground_plane</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">static</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">static</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">link</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">collision</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">collision</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plane</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">normal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0 0 1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">normal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plane</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">collision</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">visual</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">visual</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plane</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">normal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0 0 1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">normal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">size</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">100 100</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">size</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plane</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">material</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ambient</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.7 0.7 0.7 1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ambient</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">diffuse</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.7 0.7 0.7 1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">diffuse</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">material</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">visual</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">link</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">model</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Obstacles and furniture --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">model</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">table</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">pose</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2 0 0 0 0 0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">pose</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">table_top</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">collision</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">collision</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">box</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">size</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.0 0.8 0.02</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">size</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">box</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">collision</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">visual</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">visual</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">box</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">size</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.0 0.8 0.02</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">size</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">box</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">visual</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">link</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">leg1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">pose</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.4 0.35 0.35 0 0 0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">pose</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">collision</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">collision</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">cylinder</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">radius</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.02</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">radius</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">length</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.7</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">length</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">cylinder</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">collision</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">link</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">model</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">world</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">sdf</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="terrain-and-surface-modeling">Terrain and Surface Modeling<a href="#terrain-and-surface-modeling" class="hash-link" aria-label="Direct link to Terrain and Surface Modeling" title="Direct link to Terrain and Surface Modeling" translate="no">​</a></h3>
<p>Realistic terrain modeling is essential for humanoid locomotion training:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: Terrain Generation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class TerrainGenerator:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.height_map = HeightMap()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.material_properties = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def generate_realistic_terrain(self, size_x, size_y, resolution):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Generate height map using Perlin noise for natural terrain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        height_data = self.generate_perlin_noise(size_x, size_y, resolution)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Add specific terrain features</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        height_data = self.add_hills(height_data, num_hills=5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        height_data = self.add_obstacles(height_data, obstacle_positions)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        height_data = self.add_ramps(height_data, ramp_positions)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Create collision and visual meshes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        collision_mesh = self.create_collision_mesh(height_data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        visual_mesh = self.create_visual_mesh(height_data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return collision_mesh, visual_mesh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def generate_perlin_noise(self, width, height, scale):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Generate Perlin noise for natural terrain variation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        noise_map = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for y in range(height):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            row = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for x in range(width):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Scale coordinates for noise function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                nx = x / width * scale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ny = y / height * scale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                height_value = self.perlin_noise(nx, ny)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                row.append(height_value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            noise_map.append(row)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return noise_map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def add_hills(self, height_data, num_hills):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Add random hills to terrain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for _ in range(num_hills):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            hill_center_x = random.randint(0, len(height_data[0]) - 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            hill_center_y = random.randint(0, len(height_data) - 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            hill_radius = random.randint(5, 15)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            hill_height = random.uniform(0.1, 0.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for y in range(len(height_data)):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                for x in range(len(height_data[0])):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    distance = math.sqrt((x - hill_center_x)**2 + (y - hill_center_y)**2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if distance &lt;= hill_radius:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        height_contribution = hill_height * (1 - distance / hill_radius)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        height_data[y][x] += height_contribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return height_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def assign_surface_properties(self, terrain_mesh):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Assign different friction and restitution properties to terrain regions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        surface_properties = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Walkable surfaces (grass, concrete, etc.)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        surface_properties[&#x27;grass&#x27;] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;friction&#x27;: 0.7,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;restitution&#x27;: 0.1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;texture&#x27;: &#x27;grass_texture.png&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Slippery surfaces (ice, wet surfaces)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        surface_properties[&#x27;ice&#x27;] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;friction&#x27;: 0.1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;restitution&#x27;: 0.8,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;texture&#x27;: &#x27;ice_texture.png&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return surface_properties</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="dynamic-environment-elements">Dynamic Environment Elements<a href="#dynamic-environment-elements" class="hash-link" aria-label="Direct link to Dynamic Environment Elements" title="Direct link to Dynamic Environment Elements" translate="no">​</a></h3>
<p>Simulating dynamic environments with moving objects and changing conditions:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: Dynamic Environment System</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class DynamicEnvironment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.moving_objects = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.environment_states = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.event_scheduler = EventScheduler()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def add_moving_object(self, object_model, trajectory):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        moving_obj = MovingObject()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        moving_obj.model = object_model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        moving_obj.trajectory = trajectory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        moving_obj.current_time = 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.moving_objects.append(moving_obj)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def update_dynamic_elements(self, sim_time):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for obj in self.moving_objects:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Update position based on trajectory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new_pose = obj.trajectory.interpolate(sim_time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            obj.model.set_pose(new_pose)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Trigger events at specific times</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if obj.current_time &lt; sim_time and obj.has_events():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.trigger_environment_event(obj.get_next_event())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update environment states (weather, lighting, etc.)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.update_environment_states(sim_time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def trigger_environment_event(self, event):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Handle various environmental events</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if event.type == &#x27;door_open&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.open_door(event.target)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif event.type == &#x27;light_change&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.change_lighting(event.parameters)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif event.type == &#x27;obstacle_appear&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.add_obstacle(event.position)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sensor-simulation-concepts">Sensor Simulation Concepts<a href="#sensor-simulation-concepts" class="hash-link" aria-label="Direct link to Sensor Simulation Concepts" title="Direct link to Sensor Simulation Concepts" translate="no">​</a></h2>
<p>Accurate sensor simulation is crucial for developing robust perception and control systems that can transfer from simulation to reality.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="lidar-simulation">LiDAR Simulation<a href="#lidar-simulation" class="hash-link" aria-label="Direct link to LiDAR Simulation" title="Direct link to LiDAR Simulation" translate="no">​</a></h3>
<p>LiDAR sensors in simulation must accurately model the physical properties of laser ranging:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: LiDAR Simulation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class LiDARSimulator:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self, num_beams, max_range, min_range, resolution):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.num_beams = num_beams</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.max_range = max_range</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.min_range = min_range</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fov = 2 * math.pi  # 360-degree scan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.angle_increment = self.fov / num_beams</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.resolution = resolution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.noise_model = GaussianNoise(std_dev=0.01)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def simulate_scan(self, robot_pose, world_geometry):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scan_data = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for i in range(self.num_beams):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            angle = robot_pose.rotation + i * self.angle_increment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Ray casting to find intersection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ray_origin = robot_pose.position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ray_direction = Vector2(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                math.cos(angle),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                math.sin(angle)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Find closest intersection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            min_distance = self.max_range</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for geometry in world_geometry:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                distance = self.ray_intersect(ray_origin, ray_direction, geometry)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if distance and distance &lt; min_distance:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    min_distance = distance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Apply noise and range limits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if min_distance &lt; self.max_range:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                noisy_distance = min_distance + self.noise_model.sample()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                scan_data.append(max(self.min_range, noisy_distance))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                scan_data.append(float(&#x27;inf&#x27;))  # No obstacle detected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return scan_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def ray_intersect(self, origin, direction, geometry):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Implement ray-geometry intersection tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if geometry.type == &#x27;box&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return self.ray_box_intersection(origin, direction, geometry)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif geometry.type == &#x27;sphere&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return self.ray_sphere_intersection(origin, direction, geometry)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif geometry.type == &#x27;mesh&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return self.ray_mesh_intersection(origin, direction, geometry)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return None</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="camera-simulation">Camera Simulation<a href="#camera-simulation" class="hash-link" aria-label="Direct link to Camera Simulation" title="Direct link to Camera Simulation" translate="no">​</a></h3>
<p>Camera sensors must model optical properties, distortion, and image formation:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: Camera Simulation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class CameraSimulator:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self, width, height, fov, distortion_params):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.width = width</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.height = height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fov = fov</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fx = width / (2 * math.tan(fov / 2))  # Focal length x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.fy = height / (2 * math.tan(fov / 2))  # Focal length y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.cx = width / 2  # Principal point x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.cy = height / 2  # Principal point y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.distortion = distortion_params  # [k1, k2, p1, p2, k3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def simulate_image(self, camera_pose, scene_objects):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Create empty image buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image = np.zeros((self.height, self.width, 3), dtype=np.uint8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for y in range(self.height):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for x in range(self.width):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Convert pixel coordinates to camera coordinates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                x_norm = (x - self.cx) / self.fx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                y_norm = (y - self.cy) / self.fy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Apply distortion correction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                x_distorted, y_distorted = self.apply_distortion(x_norm, y_norm)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Ray direction in camera space</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ray_direction = Vector3(x_distorted, y_distorted, 1.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Transform to world space</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                world_ray = camera_pose.transform_vector(ray_direction)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                # Find intersection with scene</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                color = self.ray_trace_intersection(world_ray, scene_objects)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                image[y, x] = color</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Add noise and artifacts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image = self.add_sensor_noise(image)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image = self.add_motion_blur(image, camera_pose.velocity)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def apply_distortion(self, x, y):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Apply radial and tangential distortion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        r_squared = x*x + y*y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        radial_distortion = 1 + self.distortion[0]*r_squared + self.distortion[1]*r_squared*r_squared + self.distortion[4]*r_squared*r_squared*r_squared</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tangential_x = 2*self.distortion[2]*x*y + self.distortion[3]*(r_squared + 2*x*x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tangential_y = self.distortion[2]*(r_squared + 2*y*y) + 2*self.distortion[3]*x*y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        x_corrected = x*radial_distortion + tangential_x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        y_corrected = y*radial_distortion + tangential_y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return x_corrected, y_corrected</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="imu-simulation">IMU Simulation<a href="#imu-simulation" class="hash-link" aria-label="Direct link to IMU Simulation" title="Direct link to IMU Simulation" translate="no">​</a></h3>
<p>IMU sensors in simulation must model the physics of acceleration and rotation measurement:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: IMU Simulation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class IMUSimulator:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.accel_noise = GaussianNoise(std_dev=0.01)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.gyro_noise = GaussianNoise(std_dev=0.001)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.mag_noise = GaussianNoise(std_dev=0.0001)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.accel_bias = Vector3(0, 0, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.gyro_bias = Vector3(0, 0, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.mag_bias = Vector3(0, 0, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def simulate_imu_data(self, robot_state, dt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Get true acceleration from robot dynamics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        true_acceleration = robot_state.linear_acceleration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        true_angular_velocity = robot_state.angular_velocity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Add gravity to acceleration (IMU measures proper acceleration + gravity)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gravity_vector = Vector3(0, 0, 9.81)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        measured_accel = true_acceleration + robot_state.orientation.rotate(gravity_vector)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Add sensor noise and bias</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        noisy_accel = measured_accel + self.accel_bias + self.accel_noise.sample_vector3()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        noisy_gyro = true_angular_velocity + self.gyro_bias + self.gyro_noise.sample_vector3()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        noisy_mag = self.get_magnetic_field() + self.mag_bias + self.mag_noise.sample_vector3()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update bias over time (drift)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.update_bias_drift(dt)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;linear_acceleration&#x27;: noisy_accel,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;angular_velocity&#x27;: noisy_gyro,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;magnetic_field&#x27;: noisy_mag,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;orientation&#x27;: self.integrate_orientation(noisy_gyro, dt)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def integrate_orientation(self, angular_velocity, dt):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Integrate angular velocity to get orientation (simplified)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delta_quaternion = self.angular_velocity_to_quaternion(angular_velocity, dt)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        current_orientation = self.current_orientation * delta_quaternion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return current_orientation.normalize()</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="learning-outcomes">Learning Outcomes<a href="#learning-outcomes" class="hash-link" aria-label="Direct link to Learning Outcomes" title="Direct link to Learning Outcomes" translate="no">​</a></h2>
<p>By the end of this week, students should be able to:</p>
<ol>
<li class="">
<p><strong>Configure physics simulation environments</strong> - Set up realistic physics parameters, gravity, and environmental forces for humanoid robot simulation.</p>
</li>
<li class="">
<p><strong>Build complex simulation worlds</strong> - Create detailed environments using SDF format with appropriate terrain, obstacles, and dynamic elements.</p>
</li>
<li class="">
<p><strong>Simulate realistic sensor data</strong> - Implement accurate models for LiDAR, camera, and IMU sensors that reflect real-world behavior and limitations.</p>
</li>
<li class="">
<p><strong>Model contact forces and collisions</strong> - Understand and implement collision detection and response systems that accurately simulate physical interactions.</p>
</li>
<li class="">
<p><strong>Design transferable simulation scenarios</strong> - Create simulation environments and tasks that enable effective Sim2Real transfer for humanoid robot applications.</p>
</li>
</ol>
<hr>
<h1>Week 7: Unity Visualization Concepts</h1>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="introduction-1">Introduction<a href="#introduction-1" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" translate="no">​</a></h2>
<p>Unity provides a powerful platform for high-fidelity visualization and human-robot interaction in digital twin environments. While Gazebo excels at physics simulation, Unity offers superior rendering capabilities, realistic lighting, and immersive visualization that are essential for human-robot interaction design, teleoperation interfaces, and advanced visualization of robot behaviors. This week explores how Unity integrates with robotic systems to create compelling visual experiences and user interfaces for humanoid robotics applications.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="unity-architecture-for-robotics">Unity Architecture for Robotics<a href="#unity-architecture-for-robotics" class="hash-link" aria-label="Direct link to Unity Architecture for Robotics" title="Direct link to Unity Architecture for Robotics" translate="no">​</a></h2>
<p>Unity&#x27;s architecture provides a flexible framework for creating realistic 3D environments that can be synchronized with robotic simulation and real-world data.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="unity-scene-structure">Unity Scene Structure<a href="#unity-scene-structure" class="hash-link" aria-label="Direct link to Unity Scene Structure" title="Direct link to Unity Scene Structure" translate="no">​</a></h3>
<p>Unity organizes 3D content using a hierarchical scene structure:</p>
<ul>
<li class=""><strong>GameObjects</strong>: The fundamental objects in a Unity scene</li>
<li class=""><strong>Components</strong>: Attachable behaviors and properties (Transform, Mesh, Scripts)</li>
<li class=""><strong>Scenes</strong>: Collections of GameObjects forming complete environments</li>
<li class=""><strong>Prefabs</strong>: Reusable object templates for consistent robot models</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: Unity Robot Model Structure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class RobotModel:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.root_object = GameObject(&quot;Robot&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.joints = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.links = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.sensors = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.controllers = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def create_link(self, name, mass, inertia, visual_mesh):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        link_object = GameObject(name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        link_object.AddComponent(Rigidbody)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        link_object.GetComponent(Rigidbody).mass = mass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        link_object.GetComponent(Rigidbody).inertia = inertia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        link_object.AddComponent(MeshRenderer).mesh = visual_mesh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        link_object.AddComponent(MeshCollider).sharedMesh = visual_mesh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return link_object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def create_joint(self, name, joint_type, parent_link, child_link, limits):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joint_object = GameObject(name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joint_object.transform.parent = parent_link.transform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if joint_type == &quot;revolute&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            joint_component = joint_object.AddComponent(HingeJoint)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            joint_component.axis = limits.axis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            joint_component.limits = JointLimits(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                min=limits.min_angle,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                max=limits.max_angle,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                bounciness=limits.bounce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif joint_type == &quot;prismatic&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            joint_component = joint_object.AddComponent(ConfigurableJoint)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Configure prismatic joint parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return joint_object</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="coordinate-systems-and-transformations">Coordinate Systems and Transformations<a href="#coordinate-systems-and-transformations" class="hash-link" aria-label="Direct link to Coordinate Systems and Transformations" title="Direct link to Coordinate Systems and Transformations" translate="no">​</a></h3>
<p>Unity uses a left-handed coordinate system that must be carefully converted when integrating with ROS and other robotics frameworks:</p>
<ul>
<li class=""><strong>Unity</strong>: X-right, Y-up, Z-forward (left-handed)</li>
<li class=""><strong>ROS</strong>: X-forward, Y-left, Z-up (right-handed)</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: Coordinate System Conversion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class CoordinateConverter:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Transformation matrix from ROS to Unity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.ros_to_unity = Matrix4x4([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [0, 0, 1, 0],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [-1, 0, 0, 0],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [0, 1, 0, 0],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [0, 0, 0, 1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def ros_to_unity_position(self, ros_position):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Convert ROS position (x, y, z) to Unity position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ros_vec = Vector4(ros_position.x, ros_position.y, ros_position.z, 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        unity_vec = self.ros_to_unity * ros_vec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Vector3(unity_vec.x, unity_vec.y, unity_vec.z)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def ros_to_unity_orientation(self, ros_quaternion):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Convert ROS quaternion to Unity quaternion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Apply coordinate system transformation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        unity_quat = Quaternion(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            w=ros_quaternion.w,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            x=-ros_quaternion.z,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            y=ros_quaternion.x,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            z=ros_quaternion.y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return unity_quat.normalize()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def unity_to_ros_transform(self, unity_transform):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Convert Unity transform to ROS transform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ros_position = self.unity_to_ros_position(unity_transform.position)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ros_orientation = self.unity_to_ros_orientation(unity_transform.rotation)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ROS_Transform(ros_position, ros_orientation)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="high-fidelity-rendering-and-materials">High-Fidelity Rendering and Materials<a href="#high-fidelity-rendering-and-materials" class="hash-link" aria-label="Direct link to High-Fidelity Rendering and Materials" title="Direct link to High-Fidelity Rendering and Materials" translate="no">​</a></h2>
<p>Unity&#x27;s rendering pipeline enables photorealistic visualization that&#x27;s crucial for human-robot interaction and teleoperation scenarios.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="physically-based-rendering-pbr">Physically-Based Rendering (PBR)<a href="#physically-based-rendering-pbr" class="hash-link" aria-label="Direct link to Physically-Based Rendering (PBR)" title="Direct link to Physically-Based Rendering (PBR)" translate="no">​</a></h3>
<p>PBR materials provide realistic surface properties that respond appropriately to lighting:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: PBR Material System</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class PBRMaterialSystem:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.material_library = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.shader_properties = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def create_robot_material(self, material_type):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if material_type == &quot;metal&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material = Material(StandardShader)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.SetTexture(&quot;_MainTex&quot;, self.load_texture(&quot;robot_metal_albedo.png&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.SetTexture(&quot;_BumpMap&quot;, self.load_texture(&quot;robot_metal_normal.png&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.SetTexture(&quot;_MetallicGlossMap&quot;, self.load_texture(&quot;robot_metal_metallic.png&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.SetFloat(&quot;_Metallic&quot;, 0.9)  # High metallic value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.SetFloat(&quot;_Smoothness&quot;, 0.8)  # High smoothness</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.SetColor(&quot;_Color&quot;, Color(0.7, 0.7, 0.8))  # Metallic blue-gray</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif material_type == &quot;plastic&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material = Material(StandardShader)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.SetTexture(&quot;_MainTex&quot;, self.load_texture(&quot;robot_plastic_albedo.png&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.SetFloat(&quot;_Metallic&quot;, 0.1)  # Low metallic value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.SetFloat(&quot;_Smoothness&quot;, 0.3)  # Medium smoothness</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            material.SetColor(&quot;_Color&quot;, Color(0.3, 0.6, 0.9))  # Plastic blue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return material</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def apply_material_properties(self, game_object, material_properties):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Apply wear patterns, scratches, and aging effects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        material = game_object.GetComponent(MeshRenderer).material</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        material.SetTexture(&quot;_DetailMask&quot;, self.create_wear_pattern(material_properties))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        material.SetFloat(&quot;_OcclusionStrength&quot;, material_properties.occlusion_strength)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        material.SetFloat(&quot;_Parallax&quot;, material_properties.parallax_scale)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="advanced-lighting-systems">Advanced Lighting Systems<a href="#advanced-lighting-systems" class="hash-link" aria-label="Direct link to Advanced Lighting Systems" title="Direct link to Advanced Lighting Systems" translate="no">​</a></h3>
<p>Realistic lighting is crucial for creating immersive robot environments:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: Lighting System</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class AdvancedLighting:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.light_probes = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.reflection_probes = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.global_illumination = GlobalIllumination()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def setup_environment_lighting(self, environment_type):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if environment_type == &quot;indoor_office&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Setup directional light (simulating windows/overhead lights)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sun_light = GameObject(&quot;SunLight&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sun_light.AddComponent(Light)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sun_light.GetComponent(Light).type = LightType.Directional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sun_light.GetComponent(Light).color = Color(0.98, 0.92, 0.85)  # Warm white</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sun_light.GetComponent(Light).intensity = 1.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sun_light.transform.rotation = Quaternion.Euler(50, -30, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Add ambient lighting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            RenderSettings.ambientMode = UnityEngine.Rendering.AmbientMode.Trilight</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            RenderSettings.ambientSkyColor = Color(0.4, 0.5, 0.7)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            RenderSettings.ambientEquatorColor = Color(0.2, 0.3, 0.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            RenderSettings.ambientGroundColor = Color(0.1, 0.15, 0.25)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Setup reflection probes for metallic surfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.create_reflection_probes_for_environment()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif environment_type == &quot;outdoor&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # More intense directional light (sun)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sun_light = GameObject(&quot;Sun&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sun_light.AddComponent(Light)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sun_light.GetComponent(Light).type = LightType.Directional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sun_light.GetComponent(Light).color = Color(1.0, 0.95, 0.8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sun_light.GetComponent(Light).intensity = 1.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sun_light.transform.rotation = Quaternion.Euler(60, 120, 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Skybox for realistic background</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            RenderSettings.skybox = self.load_skybox_material(&quot;outdoor_skybox&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def create_light_probes(self, positions):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Create light probe volumes for accurate lighting on moving objects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for pos in positions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            probe = GameObject(&quot;LightProbe&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            probe.transform.position = pos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            probe.AddComponent(LightProbeGroup)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.light_probes.append(probe)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def setup_global_illumination(self, environment_bounds):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Configure baked lighting for static objects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.global_illumination.bake_static_objects = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.global_illumination.lightmap_resolution = 64  # texels per unit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.global_illumination.indirect_intensity = 1.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.global_illumination.environment_lighting = True</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="human-robot-interaction-design">Human-Robot Interaction Design<a href="#human-robot-interaction-design" class="hash-link" aria-label="Direct link to Human-Robot Interaction Design" title="Direct link to Human-Robot Interaction Design" translate="no">​</a></h2>
<p>Unity&#x27;s interface capabilities make it ideal for designing human-robot interaction systems, including teleoperation interfaces and augmented reality applications.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="user-interface-systems">User Interface Systems<a href="#user-interface-systems" class="hash-link" aria-label="Direct link to User Interface Systems" title="Direct link to User Interface Systems" translate="no">​</a></h3>
<p>Creating intuitive interfaces for robot control and monitoring:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: HRI Interface System</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class HumanRobotInterface:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.canvas = Canvas()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.robot_status_panel = self.create_robot_status_panel()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.control_interface = self.create_control_interface()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera_system = self.create_camera_system()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def create_robot_status_panel(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Create status panel showing robot vitals</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status_panel = GameObject(&quot;RobotStatusPanel&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        status_panel.AddComponent(RectTransform)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Battery indicator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        battery_bar = self.create_progress_bar(&quot;Battery&quot;, Color.green, Color.red)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        battery_text = self.create_text_element(&quot;Battery: 85%&quot;, 16)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Joint status display</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joint_status_container = GameObject(&quot;JointStatusContainer&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for joint_name in self.robot_joints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            joint_display = self.create_joint_status_display(joint_name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            joint_status_container.AddChild(joint_display)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return status_panel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def create_control_interface(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Create teleoperation controls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        control_panel = GameObject(&quot;ControlPanel&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Movement controls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        movement_controls = self.create_movement_joystick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Action buttons</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        action_buttons = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for action in [&quot;walk&quot;, &quot;grasp&quot;, &quot;speak&quot;, &quot;emergency_stop&quot;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            button = self.create_action_button(action)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            action_buttons.append(button)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Gesture recognition interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gesture_recognition = self.create_gesture_interface()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return control_panel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def create_camera_system(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Multiple camera views for comprehensive robot monitoring</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cameras = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Main view - third person follow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        main_camera = self.create_follow_camera(&quot;MainCamera&quot;, offset=Vector3(-3, 2, 0))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cameras[&quot;main&quot;] = main_camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # First person view from robot perspective</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fpv_camera = self.create_robot_camera(&quot;FPVCamera&quot;, mount_point=&quot;head&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cameras[&quot;fpv&quot;] = fpv_camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Sensor view cameras (LiDAR, depth camera simulation)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sensor_cameras = self.create_sensor_cameras()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cameras.update(sensor_cameras)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return cameras</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="gesture-recognition-and-input-systems">Gesture Recognition and Input Systems<a href="#gesture-recognition-and-input-systems" class="hash-link" aria-label="Direct link to Gesture Recognition and Input Systems" title="Direct link to Gesture Recognition and Input Systems" translate="no">​</a></h3>
<p>Advanced input systems for natural human-robot interaction:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: Gesture Recognition System</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class GestureRecognition:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.tracked_joints = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.gesture_templates = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.current_gesture_buffer = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.recognition_threshold = 0.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def initialize_gesture_system(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Setup camera for gesture recognition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera = GameObject(&quot;GestureCamera&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera.AddComponent(WebCamTexture)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.camera.AddComponent(ImageProcessingComponent)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Initialize gesture templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.load_gesture_templates()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def recognize_gesture(self, hand_positions):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Process hand tracking data and match to templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        current_gesture = self.extract_gesture_features(hand_positions)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.current_gesture_buffer.append(current_gesture)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Keep only recent gesture data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if len(self.current_gesture_buffer) &gt; 10:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.current_gesture_buffer.pop(0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Match against templates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        best_match = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        best_score = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for template_name, template in self.gesture_templates.items():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            score = self.match_gesture_to_template(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.current_gesture_buffer,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                template</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if score &gt; best_score:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                best_score = score</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                best_match = template_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if best_score &gt; self.recognition_threshold:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return best_match</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def extract_gesture_features(self, positions):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Extract meaningful features from hand positions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        features = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Calculate joint angles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        features[&quot;finger_angles&quot;] = self.calculate_finger_angles(positions)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Calculate hand velocity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        features[&quot;hand_velocity&quot;] = self.calculate_velocity(positions)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Calculate spatial relationships</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        features[&quot;finger_distances&quot;] = self.calculate_finger_distances(positions)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return features</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="real-time-simulation-synchronization">Real-time Simulation Synchronization<a href="#real-time-simulation-synchronization" class="hash-link" aria-label="Direct link to Real-time Simulation Synchronization" title="Direct link to Real-time Simulation Synchronization" translate="no">​</a></h2>
<p>Synchronizing Unity visualization with real-time robotic systems requires careful timing and data management.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ros-integration">ROS Integration<a href="#ros-integration" class="hash-link" aria-label="Direct link to ROS Integration" title="Direct link to ROS Integration" translate="no">​</a></h3>
<p>Connecting Unity to ROS systems for real-time data exchange:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: ROS Integration System</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class UnityROSBridge:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.ros_node = None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.subscribers = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.publishers = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.synchronization_manager = SynchronizationManager()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def initialize_ros_connection(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Initialize ROS connection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.ros_node = rclpy.create_node(&#x27;unity_bridge&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Create subscribers for robot data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.subscribers[&#x27;joint_states&#x27;] = self.ros_node.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sensor_msgs.msg.JointState,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/joint_states&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.joint_state_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.subscribers[&#x27;robot_pose&#x27;] = self.ros_node.create_subscription(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            geometry_msgs.msg.PoseStamped,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/robot_pose&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.robot_pose_callback,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Create publishers for Unity commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.publishers[&#x27;unity_commands&#x27;] = self.ros_node.create_publisher(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            std_msgs.msg.String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;/unity_commands&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def joint_state_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update Unity robot model with joint states</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for i, joint_name in enumerate(msg.name):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if joint_name in self.robot_model.joints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                joint_angle = msg.position[i]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.update_joint_in_unity(joint_name, joint_angle)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def robot_pose_callback(self, msg):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update Unity robot position and orientation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        unity_position = self.ros_to_unity_position(msg.pose.position)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        unity_rotation = self.ros_to_unity_orientation(msg.pose.orientation)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.robot_model.root_object.transform.position = unity_position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.robot_model.root_object.transform.rotation = unity_rotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def synchronize_simulation(self, unity_time, ros_time):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Ensure Unity and ROS simulation are synchronized</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time_difference = abs(unity_time - ros_time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if time_difference &gt; 0.1:  # 100ms threshold</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Resynchronize by interpolating between states</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            target_time = max(unity_time, ros_time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.interpolate_robot_state(target_time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Maintain consistent frame rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.maintain_frame_rate()</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-optimization">Performance Optimization<a href="#performance-optimization" class="hash-link" aria-label="Direct link to Performance Optimization" title="Direct link to Performance Optimization" translate="no">​</a></h3>
<p>Optimizing Unity for real-time robotics applications:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: Performance Optimization System</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class PerformanceOptimizer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.lod_system = LODSystem()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.occlusion_culling = OcclusionCulling()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.object_pooling = ObjectPooling()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.rendering_pipeline = RenderingPipeline()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def optimize_robot_rendering(self, robot_model):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Apply Level of Detail (LOD) to robot components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for component in robot_model.get_components():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lod_group = component.AddComponent(LODGroup)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lods = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                LOD(0.0, [self.get_high_detail_mesh(component)]),  # High detail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                LOD(0.01, [self.get_medium_detail_mesh(component)]),  # Medium detail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                LOD(0.05, [self.get_low_detail_mesh(component)])  # Low detail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lod_group.SetLODs(lods)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Enable occlusion culling for robot components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.occlusion_culling.add_static_objects(robot_model.get_environment_objects())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def implement_object_pooling(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Pre-instantiate objects to avoid runtime allocation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for obj_type in [&quot;laser_points&quot;, &quot;particles&quot;, &quot;effects&quot;]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pool = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for i in range(100):  # Pre-allocate 100 objects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                obj = self.instantiate_object(obj_type)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                obj.SetActive(False)  # Inactive in pool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                pool.append(obj)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.object_pooling.register_pool(obj_type, pool)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def optimize_rendering_pipeline(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Configure rendering for robotics applications</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.rendering_pipeline.use_forward_rendering = True  # Better for real-time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.rendering_pipeline.shadow_distance = 50.0  # Optimize shadow rendering</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.rendering_pipeline.texture_resolution = 1024  # Balance quality/performance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.rendering_pipeline.occlusion_culling = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.rendering_pipeline.dynamic_batching = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.rendering_pipeline.static_batching = True</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="augmented-reality-integration">Augmented Reality Integration<a href="#augmented-reality-integration" class="hash-link" aria-label="Direct link to Augmented Reality Integration" title="Direct link to Augmented Reality Integration" translate="no">​</a></h2>
<p>Unity&#x27;s AR capabilities enable overlaying robot information onto real-world environments:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pseudocode: AR Integration System</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ARIntegration:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def __init__(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.ar_session = ARSession()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.robot_visualization = RobotARVisualization()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.spatial_mapping = SpatialMapping()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def initialize_ar_session(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Initialize AR session with camera and plane detection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.ar_session.Initialize()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Setup plane detection for placing robot visualizations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.ar_session.plane_detection = PlaneDetection.Horizontal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.ar_session.plane_detection_callback = self.on_plane_detected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Setup image tracking for robot markers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.ar_session.image_tracking = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.ar_session.tracked_images = self.load_robot_markers()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def visualize_robot_in_ar(self, robot_pose, robot_state):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Create AR visualization of robot at real-world location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        robot_ar_object = self.robot_visualization.create_robot_model()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Position robot in AR space</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ar_position = self.transform_ros_to_ar(robot_pose.position)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ar_rotation = self.transform_ros_to_ar(robot_pose.orientation)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        robot_ar_object.transform.position = ar_position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        robot_ar_object.transform.rotation = ar_rotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Update robot state visualization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.update_robot_state_visualization(robot_ar_object, robot_state)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Add interaction affordances</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.add_interaction_handles(robot_ar_object)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def create_robot_state_visualization(self, robot_object, state):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Visualize robot state information in AR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Joint angles as overlay indicators</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for joint_name, angle in state.joint_angles.items():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            angle_indicator = self.create_angle_indicator(joint_name, angle)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.attach_to_joint(robot_object, joint_name, angle_indicator)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Sensor data visualization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if hasattr(state, &#x27;lidar_data&#x27;):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lidar_visualization = self.create_lidar_visualization(state.lidar_data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.attach_sensor_visualization(robot_object, lidar_visualization)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # Planning and navigation visualization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if hasattr(state, &#x27;planned_path&#x27;):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            path_visualization = self.create_path_visualization(state.planned_path)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.attach_path_visualization(robot_object, path_visualization)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="learning-outcomes-1">Learning Outcomes<a href="#learning-outcomes-1" class="hash-link" aria-label="Direct link to Learning Outcomes" title="Direct link to Learning Outcomes" translate="no">​</a></h2>
<p>By the end of this week, students should be able to:</p>
<ol>
<li class="">
<p><strong>Design Unity scenes for robotics</strong> - Create hierarchical robot models with appropriate coordinate system conversions and component structures.</p>
</li>
<li class="">
<p><strong>Implement high-fidelity visualization</strong> - Apply physically-based rendering, advanced lighting, and realistic materials to create compelling robot visualizations.</p>
</li>
<li class="">
<p><strong>Develop human-robot interaction interfaces</strong> - Create intuitive user interfaces, gesture recognition systems, and teleoperation controls in Unity.</p>
</li>
<li class="">
<p><strong>Integrate with real-time systems</strong> - Connect Unity to ROS and other robotic systems for synchronized visualization and control.</p>
</li>
<li class="">
<p><strong>Optimize performance for real-time applications</strong> - Apply LOD systems, object pooling, and rendering optimization techniques for smooth robot visualization.</p>
</li>
</ol>
<hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/AqsaIftikhar15/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/docs/module-2-digital-twin/week-6-7-gazebo-unity.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-1-ros2/week-4-advanced-ros2/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Advanced ROS 2 Concepts</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/module-2-digital-twin/simulation-concepts/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Simulation Concepts</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#physics-simulation-fundamentals" class="table-of-contents__link toc-highlight">Physics Simulation Fundamentals</a><ul><li><a href="#physics-engine-architecture" class="table-of-contents__link toc-highlight">Physics Engine Architecture</a></li><li><a href="#gravity-and-environmental-forces" class="table-of-contents__link toc-highlight">Gravity and Environmental Forces</a></li><li><a href="#collision-detection-and-response" class="table-of-contents__link toc-highlight">Collision Detection and Response</a></li></ul></li><li><a href="#environment-building-and-world-modeling" class="table-of-contents__link toc-highlight">Environment Building and World Modeling</a><ul><li><a href="#world-description-format-sdf" class="table-of-contents__link toc-highlight">World Description Format (SDF)</a></li><li><a href="#terrain-and-surface-modeling" class="table-of-contents__link toc-highlight">Terrain and Surface Modeling</a></li><li><a href="#dynamic-environment-elements" class="table-of-contents__link toc-highlight">Dynamic Environment Elements</a></li></ul></li><li><a href="#sensor-simulation-concepts" class="table-of-contents__link toc-highlight">Sensor Simulation Concepts</a><ul><li><a href="#lidar-simulation" class="table-of-contents__link toc-highlight">LiDAR Simulation</a></li><li><a href="#camera-simulation" class="table-of-contents__link toc-highlight">Camera Simulation</a></li><li><a href="#imu-simulation" class="table-of-contents__link toc-highlight">IMU Simulation</a></li></ul></li><li><a href="#learning-outcomes" class="table-of-contents__link toc-highlight">Learning Outcomes</a></li><li><a href="#introduction-1" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#unity-architecture-for-robotics" class="table-of-contents__link toc-highlight">Unity Architecture for Robotics</a><ul><li><a href="#unity-scene-structure" class="table-of-contents__link toc-highlight">Unity Scene Structure</a></li><li><a href="#coordinate-systems-and-transformations" class="table-of-contents__link toc-highlight">Coordinate Systems and Transformations</a></li></ul></li><li><a href="#high-fidelity-rendering-and-materials" class="table-of-contents__link toc-highlight">High-Fidelity Rendering and Materials</a><ul><li><a href="#physically-based-rendering-pbr" class="table-of-contents__link toc-highlight">Physically-Based Rendering (PBR)</a></li><li><a href="#advanced-lighting-systems" class="table-of-contents__link toc-highlight">Advanced Lighting Systems</a></li></ul></li><li><a href="#human-robot-interaction-design" class="table-of-contents__link toc-highlight">Human-Robot Interaction Design</a><ul><li><a href="#user-interface-systems" class="table-of-contents__link toc-highlight">User Interface Systems</a></li><li><a href="#gesture-recognition-and-input-systems" class="table-of-contents__link toc-highlight">Gesture Recognition and Input Systems</a></li></ul></li><li><a href="#real-time-simulation-synchronization" class="table-of-contents__link toc-highlight">Real-time Simulation Synchronization</a><ul><li><a href="#ros-integration" class="table-of-contents__link toc-highlight">ROS Integration</a></li><li><a href="#performance-optimization" class="table-of-contents__link toc-highlight">Performance Optimization</a></li></ul></li><li><a href="#augmented-reality-integration" class="table-of-contents__link toc-highlight">Augmented Reality Integration</a></li><li><a href="#learning-outcomes-1" class="table-of-contents__link toc-highlight">Learning Outcomes</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Modules</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/docs/module-1-ros2/week-1-2-intro-physical-ai/">Module 1: The Robotic Nervous System (ROS 2)</a></li><li class="footer__item"><a class="footer__link-item" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/docs/module-2-digital-twin/week-6-7-gazebo-unity/">Module 2: The Digital Twin (Gazebo &amp; Unity)</a></li><li class="footer__item"><a class="footer__link-item" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/docs/module-3-ai-brain/week-8-10-isaac-platform/">Module 3: The AI-Robot Brain (NVIDIA Isaac)</a></li><li class="footer__item"><a class="footer__link-item" href="/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/docs/module-4-vla/week-13-vla-concepts/">Module 4: Vision-Language-Action (VLA)</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/AqsaIftikhar15/Textbook-for-Teaching-Physical-AI-Humanoid-Robotics-Course/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Physical AI & Humanoid Robotics Book. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>