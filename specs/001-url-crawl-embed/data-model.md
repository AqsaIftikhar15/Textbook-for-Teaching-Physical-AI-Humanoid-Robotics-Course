# Data Model: URL Crawl → Embed → Qdrant Upload

## Entities

### CrawledPage
Represents a single page from the Docusaurus book that has been crawled

- **url** (string): The URL of the page that was crawled
- **raw_html** (string): The raw HTML content of the page (optional, may be discarded after processing)
- **clean_text** (string): The cleaned text content extracted from the page
- **title** (string): The title of the page extracted from HTML
- **created_at** (datetime): Timestamp when the page was crawled
- **status_code** (integer): HTTP status code from the crawl request

### TextChunk
Represents a segment of cleaned text ready for embedding, with associated metadata

- **id** (string): Unique identifier for the chunk (UUID or hash-based)
- **content** (string): The actual text content of the chunk
- **source_url** (string): URL of the original page this chunk came from
- **source_title** (string): Title of the original page
- **chunk_index** (integer): Position of this chunk within the original document
- **metadata** (dict): Additional metadata (source_url, title, etc.)
- **created_at** (datetime): Timestamp when the chunk was created

### EmbeddingVector
Represents the vector representation of a text chunk generated by Cohere models

- **chunk_id** (string): Reference to the TextChunk this embedding represents
- **vector** (list[float]): The actual embedding vector (high-dimensional float array)
- **model_name** (string): Name of the model used to generate the embedding
- **embedding_size** (integer): Dimensionality of the embedding vector
- **created_at** (datetime): Timestamp when the embedding was generated

### QdrantRecord
Represents the stored vector with associated metadata in the Qdrant collection

- **id** (string): Unique identifier in Qdrant (can be same as chunk_id)
- **vector** (list[float]): The embedding vector data
- **payload** (dict): Metadata stored with the vector in Qdrant
  - source_url (string): Original URL of the content
  - source_title (string): Original title of the content
  - content (string): The actual text content
  - chunk_index (integer): Position of this chunk in original document
  - created_at (datetime): When this record was created
- **collection_name** (string): Name of the Qdrant collection ('rag_embedding')

## Relationships

- **CrawledPage** 1 → * **TextChunk**: One crawled page can produce multiple text chunks
- **TextChunk** 1 → 1 **EmbeddingVector**: One text chunk produces one embedding vector
- **EmbeddingVector** 1 → 1 **QdrantRecord**: One embedding vector becomes one Qdrant record

## Validation Rules

### CrawledPage
- url must be a valid URL format
- clean_text must not be empty
- status_code must be between 200-299 for successful crawl

### TextChunk
- content must be between minimum and maximum length thresholds
- chunk_id must be unique
- source_url must reference a valid crawled page

### EmbeddingVector
- vector must have consistent dimensionality based on model
- chunk_id must reference a valid text chunk
- vector values must be valid floats

### QdrantRecord
- id must be unique within the collection
- vector dimension must match collection schema
- payload must contain required metadata fields